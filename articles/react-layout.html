<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
        <link rel="stylesheet" type="text/css" href="../stylesheets/reset.css"/>
        <link rel="stylesheet" type="text/css" href="../stylesheets/main.css"/>
        <link rel="stylesheet" type="text/css" href="../stylesheets/article.css"/>
        <title>6174's blog</title>
    </head>
<body>
   <div class="page-article">
        <nav class="site-nav" >
            <div class="ui breadcrumb" >
                <a href="http://6174.github.io/blog/">archive</a>
            </div>
        </nav>
        <div class="fixcontainer">
            <article class="article">
                <header class="post-header">
                    <h1 class="post-title"> React-Native 布局概览</h1>
                    <section class="post-meta">
                        <a class="post-author" target="_blank" href="http://www.weibo.com/2254313183/profile"> &lt;6174/&gt;</a>
                        创建于
                        <time class="post-date"> 2015-4-10 </time>
                    </section>
                    <hr/>
                </header>
                <section class="post-content">
                    <h2 id="-">宽度单位和像素密度</h2>
<p>react的宽度不支持百分比，设置宽度时不需要带单位 <code>{width: 10}</code>， 那么10代表的具体宽度是多少呢？  </p>
<p>不知道是官网文档不全还是我眼瞎，反正是没找到，那做一个实验自己找吧：</p>
<pre><code class="lang-javascript">    var Dimensions = require(<span class="hljs-string">'Dimensions'</span>);
    &lt;Text style={styles.welcome}&gt;
          window.<span class="hljs-variable">width</span>={Dimensions.<span class="hljs-built_in">get</span>(<span class="hljs-string">'window'</span>).<span class="hljs-variable">width</span> + <span class="hljs-string">'\n'</span>} 
          window.<span class="hljs-variable">height</span>={Dimensions.<span class="hljs-built_in">get</span>(<span class="hljs-string">'window'</span>).<span class="hljs-variable">height</span> + <span class="hljs-string">'\n'</span>} 
          pxielRatio={PixelRatio.<span class="hljs-built_in">get</span>()}
    &lt;/Text&gt;
</code></pre>
<p>默认用的是ihone6的模拟器结果是：</p>
<pre><code class="lang-javascript">    <span class="hljs-built_in">window</span>.width=<span class="hljs-number">375</span>
    <span class="hljs-built_in">window</span>.height=<span class="hljs-number">667</span>
</code></pre>
<p>我们知道iphone系列的尺寸如下图：</p>
<p><img src="http://gtms04.alicdn.com/tps/i4/TB1tOgMHpXXXXaIXFXXWb19GXXX-911-563.jpg" alt="iphones"> </p>
<p>可以看到iphone 6的宽度为 375pt，对应了上边的375，由此可见react的单位为pt。 那如何获取实际的像素尺寸呢？ 这对图片的高清化很重要，如果我的图片大小为100<em>100 px. 设置宽度为100 </em> 100. 那在iphone上的尺寸就是模糊的。 这个时候需要的图像大小应该是 100 * pixelRatio的大小 。 </p>
<p>react 提供了PixelRatio 的获取方式<a href="https://facebook.github.io/react-native/docs/pixelratio.html">https://facebook.github.io/react-native/docs/pixelratio.html</a> </p>
<pre><code class="lang-javascript"> var <span class="hljs-built_in">image</span> = getImage({
   <span class="hljs-variable">width</span>: <span class="hljs-number">200</span> * PixelRatio.<span class="hljs-built_in">get</span>(),
   <span class="hljs-variable">height</span>: <span class="hljs-number">100</span> * PixelRatio.<span class="hljs-built_in">get</span>()
 });
 &lt;Image source={<span class="hljs-built_in">image</span>} style={{<span class="hljs-variable">width</span>: <span class="hljs-number">200</span>, <span class="hljs-variable">height</span>: <span class="hljs-number">100</span>}} /&gt;
</code></pre>
<h2 id="flex-">flex的布局</h2>
<h3 id="-">默认宽度</h3>
<p>我们知道一个div如果不设置宽度，默认的会占用100%的宽度， 为了验证100%这个问题， 做三个实验</p>
<ol>
<li>根节点上方一个View， 不设置宽度</li>
<li>固定宽度的元素上设置一个View， 不设置宽度</li>
<li>flex的元素上放一个View宽度， 不设置宽度 </li>
</ol>
<pre><code class="lang-html"><span class="xml"> <span class="hljs-tag">&lt;<span class="hljs-title">Text</span> <span class="hljs-attribute">style</span>=<span class="hljs-value">{[styles.text,</span> <span class="hljs-attribute">styles.header</span>]}&gt;</span>
      根节点上放一个元素，不设置宽度
  <span class="hljs-tag">&lt;/<span class="hljs-title">Text</span>&gt;</span>        

  <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">style</span>=</span></span><span class="hljs-expression">{{<span class="hljs-variable">height</span>: 20, <span class="hljs-variable">backgroundColor</span>: '#333333'}}</span><span class="xml"><span class="hljs-tag"> /&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-title">Text</span> <span class="hljs-attribute">style</span>=<span class="hljs-value">{[styles.text,</span> <span class="hljs-attribute">styles.header</span>]}&gt;</span>
      固定宽度的元素上放一个View，不设置宽度
  <span class="hljs-tag">&lt;/<span class="hljs-title">Text</span>&gt;</span> 

  <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">style</span>=</span></span><span class="hljs-expression">{{<span class="hljs-variable">width</span>: 100}}</span><span class="xml"><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">style</span>=</span></span><span class="hljs-expression">{{<span class="hljs-variable">height</span>: 20, <span class="hljs-variable">backgroundColor</span>: '#333333'}}</span><span class="xml"><span class="hljs-tag"> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-title">Text</span> <span class="hljs-attribute">style</span>=<span class="hljs-value">{[styles.text,</span> <span class="hljs-attribute">styles.header</span>]}&gt;</span>
      flex的元素上放一个View，不设置宽度
  <span class="hljs-tag">&lt;/<span class="hljs-title">Text</span>&gt;</span> 

  <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">style</span>=</span></span><span class="hljs-expression">{{<span class="hljs-variable">flexDirection</span>: '<span class="hljs-variable">row</span>'}}</span><span class="xml"><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">style</span>=</span></span><span class="hljs-expression">{{<span class="hljs-variable">flex</span>: 1}}</span><span class="xml"><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">style</span>=</span></span><span class="hljs-expression">{{<span class="hljs-variable">height</span>: 20, <span class="hljs-variable">backgroundColor</span>: '#333333'}}</span><span class="xml"><span class="hljs-tag"> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">style</span>=</span></span><span class="hljs-expression">{{<span class="hljs-variable">flex</span>: 1}}</span><span class="xml"><span class="hljs-tag">/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span></span>
</code></pre>
<p><img src="http://gtms01.alicdn.com/tps/i1/TB1KJoMHpXXXXcKXVXXKEpZRFXX-376-206.png" alt=""></p>
<p>结果可以看到flex的元素如果不设置宽度， 都会百分之百的占满父容器。</p>
<h3 id="-">水平垂直居中</h3>
<p>css 里边经常会做的事情是去讲一个文本或者图片水平垂直居中，如果使用过css 的flexbox当然知道使用<code>alignItems</code> 和 <code>justifyContent</code> . 那用react-native也来做一下实验 </p>
<pre><code class="lang-html"><span class="xml">   <span class="hljs-tag">&lt;<span class="hljs-title">Text</span> <span class="hljs-attribute">style</span>=<span class="hljs-value">{[styles.text,</span> <span class="hljs-attribute">styles.header</span>]}&gt;</span>
        水平居中
    <span class="hljs-tag">&lt;/<span class="hljs-title">Text</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">style</span>=</span></span><span class="hljs-expression">{{<span class="hljs-variable">height</span>: 100, <span class="hljs-variable">backgroundColor</span>: '#333333', <span class="hljs-variable">alignItems</span>: '<span class="hljs-variable">center</span>'}}</span><span class="xml"><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">style</span>=</span></span><span class="hljs-expression">{{<span class="hljs-variable">backgroundColor</span>: '<span class="hljs-begin-block">#fefefe</span>', <span class="hljs-variable">width</span>: 30, <span class="hljs-variable">height</span>: 30, <span class="hljs-variable">borderRadius</span>: 15}}</span><span class="xml"><span class="hljs-tag">/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>

     <span class="hljs-tag">&lt;<span class="hljs-title">Text</span> <span class="hljs-attribute">style</span>=<span class="hljs-value">{[styles.text,</span> <span class="hljs-attribute">styles.header</span>]}&gt;</span>
        垂直居中
    <span class="hljs-tag">&lt;/<span class="hljs-title">Text</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">style</span>=</span></span><span class="hljs-expression">{{<span class="hljs-variable">height</span>: 100, <span class="hljs-variable">backgroundColor</span>: '#333333', <span class="hljs-variable">justifyContent</span>: '<span class="hljs-variable">center</span>'}}</span><span class="xml"><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">style</span>=</span></span><span class="hljs-expression">{{<span class="hljs-variable">backgroundColor</span>: '<span class="hljs-begin-block">#fefefe</span>', <span class="hljs-variable">width</span>: 30, <span class="hljs-variable">height</span>: 30, <span class="hljs-variable">borderRadius</span>: 15}}</span><span class="xml"><span class="hljs-tag">/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-title">Text</span> <span class="hljs-attribute">style</span>=<span class="hljs-value">{[styles.text,</span> <span class="hljs-attribute">styles.header</span>]}&gt;</span>
        水平垂直居中
    <span class="hljs-tag">&lt;/<span class="hljs-title">Text</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">style</span>=</span></span><span class="hljs-expression">{{<span class="hljs-variable">height</span>: 100, <span class="hljs-variable">backgroundColor</span>: '#333333', <span class="hljs-variable">alignItems</span>: '<span class="hljs-variable">center</span>', <span class="hljs-variable">justifyContent</span>: '<span class="hljs-variable">center</span>'}}</span><span class="xml"><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">style</span>=</span></span><span class="hljs-expression">{{<span class="hljs-variable">backgroundColor</span>: '<span class="hljs-begin-block">#fefefe</span>', <span class="hljs-variable">width</span>: 30, <span class="hljs-variable">height</span>: 30, <span class="hljs-variable">borderRadius</span>: 15}}</span><span class="xml"><span class="hljs-tag">/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span></span>
</code></pre>
<p><img src="http://gtms01.alicdn.com/tps/i1/TB1lgwPHpXXXXXYXFXXKUUPQVXX-375-440.png" alt="">   </p>
<h3 id="-">网格布局</h3>
<p>网格布局实验， 网格布局能够满足绝大多数的日常开发需求，所以只要满足网格布局的spec，那么就可以证明react的flex布局能够满足正常开发需求 </p>
<h4 id="-">等分的网格</h4>
<p><img src="http://gtms03.alicdn.com/tps/i3/TB1Nf3PHpXXXXXLXpXXex4tPVXX-374-53.png" alt=""></p>
<pre><code class="lang-javascript">    <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">style</span>=<span class="hljs-value">{styles.flexContainer}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">style</span>=<span class="hljs-value">{styles.cell}</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">Text</span> <span class="hljs-attribute">style</span>=<span class="hljs-value">{styles.welcome}</span>&gt;</span>
          cell1
        <span class="hljs-tag">&lt;/<span class="hljs-title">Text</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">style</span>=<span class="hljs-value">{styles.cell}</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">Text</span> <span class="hljs-attribute">style</span>=<span class="hljs-value">{styles.welcome}</span>&gt;</span>
          cell2
        <span class="hljs-tag">&lt;/<span class="hljs-title">Text</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">style</span>=<span class="hljs-value">{styles.cell}</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">Text</span> <span class="hljs-attribute">style</span>=<span class="hljs-value">{styles.welcome}</span>&gt;</span>
          cell3
        <span class="hljs-tag">&lt;/<span class="hljs-title">Text</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>

    styles = {
        flexContainer: {
            // 容器需要添加direction才能变成让子元素flex
            flexDirection: 'row'
        },
        cell: {
            flex: 1,
            height: 50,
            backgroundColor: '#aaaaaa'
        },
        welcome: {
            fontSize: 20,
            textAlign: 'center',
            margin: 10
        },
    }
</code></pre>
<h4 id="-flex-">左边固定， 右边固定，中间flex的布局</h4>
<p><img src="http://gtms04.alicdn.com/tps/i4/TB1o03PHpXXXXXQXpXXrEIcPVXX-376-51.png" alt=""> </p>
<pre><code class="lang-javascript">    <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">style</span>=<span class="hljs-value">{styles.flexContainer}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">style</span>=<span class="hljs-value">{styles.cellfixed}</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">Text</span> <span class="hljs-attribute">style</span>=<span class="hljs-value">{styles.welcome}</span>&gt;</span>
          fixed
        <span class="hljs-tag">&lt;/<span class="hljs-title">Text</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">style</span>=<span class="hljs-value">{styles.cell}</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">Text</span> <span class="hljs-attribute">style</span>=<span class="hljs-value">{styles.welcome}</span>&gt;</span>
          flex
        <span class="hljs-tag">&lt;/<span class="hljs-title">Text</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">style</span>=<span class="hljs-value">{styles.cellfixed}</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">Text</span> <span class="hljs-attribute">style</span>=<span class="hljs-value">{styles.welcome}</span>&gt;</span>
          fixed
        <span class="hljs-tag">&lt;/<span class="hljs-title">Text</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>

    styles = {
        flexContainer: {
            // 容器需要添加direction才能变成让子元素flex
            flexDirection: 'row'
        },
        cell: {
            flex: 1,
            height: 50,
            backgroundColor: '#aaaaaa'
        },
        welcome: {
            fontSize: 20,
            textAlign: 'center',
            margin: 10
        },
        cellfixed: {
            height: 50,
            width: 80,
            backgroundColor: '#fefefe'
        } 
    }
</code></pre>
<h4 id="-">嵌套的网格</h4>
<p>通常网格不是一层的，布局容器都是一层套一层的， 所以必须验证在<code>real world</code>下面的网格布局 </p>
<pre><code class="lang-html"><span class="xml"> <span class="hljs-tag">&lt;<span class="hljs-title">Text</span> <span class="hljs-attribute">style</span>=<span class="hljs-value">{[styles.text,</span> <span class="hljs-attribute">styles.header</span>]}&gt;</span>
    嵌套的网格
  <span class="hljs-tag">&lt;/<span class="hljs-title">Text</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">style</span>=</span></span><span class="hljs-expression">{{<span class="hljs-variable">flexDirection</span>: '<span class="hljs-variable">row</span>', <span class="hljs-variable">height</span>: 200, <span class="hljs-variable">backgroundColor</span>:<span class="hljs-string">"#fefefe"</span>, <span class="hljs-variable">padding</span>: 20}}</span><span class="xml"><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">style</span>=</span></span><span class="hljs-expression">{{<span class="hljs-variable">flex</span>: 1, <span class="hljs-variable">flexDirection</span>:'<span class="hljs-variable">column</span>', <span class="hljs-variable">padding</span>: 15, <span class="hljs-variable">backgroundColor</span>:<span class="hljs-string">"#eeeeee"</span>}}</span><span class="xml"><span class="hljs-tag">&gt;</span>  
        <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">style</span>=</span></span><span class="hljs-expression">{{<span class="hljs-variable">flex</span>: 1, <span class="hljs-variable">backgroundColor</span>:<span class="hljs-string">"#bbaaaa"</span>}}</span><span class="xml"><span class="hljs-tag">&gt;</span>  
        <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">style</span>=</span></span><span class="hljs-expression">{{<span class="hljs-variable">flex</span>: 1, <span class="hljs-variable">backgroundColor</span>:<span class="hljs-string">"#aabbaa"</span>}}</span><span class="xml"><span class="hljs-tag">&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">style</span>=</span></span><span class="hljs-expression">{{<span class="hljs-variable">flex</span>: 1, <span class="hljs-variable">padding</span>: 15, <span class="hljs-variable">flexDirection</span>:'<span class="hljs-variable">row</span>', <span class="hljs-variable">backgroundColor</span>:<span class="hljs-string">"#eeeeee"</span>}}</span><span class="xml"><span class="hljs-tag">&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">style</span>=</span></span><span class="hljs-expression">{{<span class="hljs-variable">flex</span>: 1, <span class="hljs-variable">backgroundColor</span>:<span class="hljs-string">"#aaaabb"</span>}}</span><span class="xml"><span class="hljs-tag">&gt;</span>  
            <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">style</span>=</span></span><span class="hljs-expression">{{<span class="hljs-variable">flex</span>: 1, <span class="hljs-variable">flexDirection</span>:'<span class="hljs-variable">row</span>', <span class="hljs-variable">backgroundColor</span>:<span class="hljs-string">"#eeaaaa"</span>}}</span><span class="xml"><span class="hljs-tag">&gt;</span> 
               <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">style</span>=</span></span><span class="hljs-expression">{{<span class="hljs-variable">flex</span>: 1, <span class="hljs-variable">backgroundColor</span>:<span class="hljs-string">"#eebbaa"</span>}}</span><span class="xml"><span class="hljs-tag">&gt;</span>  
              <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">style</span>=</span></span><span class="hljs-expression">{{<span class="hljs-variable">flex</span>: 1, <span class="hljs-variable">backgroundColor</span>:<span class="hljs-string">"#bbccee"</span>}}</span><span class="xml"><span class="hljs-tag">&gt;</span>
              <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span> 
            <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">style</span>=</span></span><span class="hljs-expression">{{<span class="hljs-variable">flex</span>: 1, <span class="hljs-variable">backgroundColor</span>:<span class="hljs-string">"#eebbdd"</span>}}</span><span class="xml"><span class="hljs-tag">&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">style</span>=</span></span><span class="hljs-expression">{{<span class="hljs-variable">flex</span>: 1, <span class="hljs-variable">backgroundColor</span>:<span class="hljs-string">"#aaccaa"</span>}}</span><span class="xml"><span class="hljs-tag">&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">ScrollView</span> <span class="hljs-attribute">style</span>=</span></span><span class="hljs-expression">{{<span class="hljs-variable">flex</span>: 1, <span class="hljs-variable">backgroundColor</span>:<span class="hljs-string">"#bbccdd"</span>, <span class="hljs-variable">padding</span>: 5}}</span><span class="xml"><span class="hljs-tag">&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">style</span>=</span></span><span class="hljs-expression">{{<span class="hljs-variable">flexDirection</span>: '<span class="hljs-variable">row</span>', <span class="hljs-variable">height</span>: 50, <span class="hljs-variable">backgroundColor</span>:<span class="hljs-string">"#fefefe"</span>}}</span><span class="xml"><span class="hljs-tag">&gt;</span>
                  <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">style</span>=</span></span><span class="hljs-expression">{{<span class="hljs-variable">flex</span>: 1, <span class="hljs-variable">flexDirection</span>:'<span class="hljs-variable">column</span>', <span class="hljs-variable">backgroundColor</span>:<span class="hljs-string">"#eeeeee"</span>}}</span><span class="xml"><span class="hljs-tag">&gt;</span>  
                      <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">style</span>=</span></span><span class="hljs-expression">{{<span class="hljs-variable">flex</span>: 1, <span class="hljs-variable">backgroundColor</span>:<span class="hljs-string">"#bbaaaa"</span>}}</span><span class="xml"><span class="hljs-tag">&gt;</span>  
                      <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
                      <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">style</span>=</span></span><span class="hljs-expression">{{<span class="hljs-variable">flex</span>: 1, <span class="hljs-variable">backgroundColor</span>:<span class="hljs-string">"#aabbaa"</span>}}</span><span class="xml"><span class="hljs-tag">&gt;</span>
                      <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
                  <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
                  <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">style</span>=</span></span><span class="hljs-expression">{{<span class="hljs-variable">flex</span>: 1, <span class="hljs-variable">flexDirection</span>:'<span class="hljs-variable">row</span>', <span class="hljs-variable">backgroundColor</span>:<span class="hljs-string">"#eeeeee"</span>}}</span><span class="xml"><span class="hljs-tag">&gt;</span>
                      <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">style</span>=</span></span><span class="hljs-expression">{{<span class="hljs-variable">flex</span>: 1, <span class="hljs-variable">backgroundColor</span>:<span class="hljs-string">"#aaaabb"</span>}}</span><span class="xml"><span class="hljs-tag">&gt;</span>  
                          <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">style</span>=</span></span><span class="hljs-expression">{{<span class="hljs-variable">flex</span>: 1, <span class="hljs-variable">flexDirection</span>:'<span class="hljs-variable">row</span>', <span class="hljs-variable">backgroundColor</span>:<span class="hljs-string">"#eeaaaa"</span>}}</span><span class="xml"><span class="hljs-tag">&gt;</span> 
                             <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">style</span>=</span></span><span class="hljs-expression">{{<span class="hljs-variable">flex</span>: 1, <span class="hljs-variable">backgroundColor</span>:<span class="hljs-string">"#eebbaa"</span>}}</span><span class="xml"><span class="hljs-tag">&gt;</span>  
                            <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">style</span>=</span></span><span class="hljs-expression">{{<span class="hljs-variable">flex</span>: 1, <span class="hljs-variable">backgroundColor</span>:<span class="hljs-string">"#bbccee"</span>}}</span><span class="xml"><span class="hljs-tag">&gt;</span>
                            <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span> 
                          <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
                          <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">style</span>=</span></span><span class="hljs-expression">{{<span class="hljs-variable">flex</span>: 1, <span class="hljs-variable">backgroundColor</span>:<span class="hljs-string">"#eebbdd"</span>}}</span><span class="xml"><span class="hljs-tag">&gt;</span>
                          <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
                      <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
                      <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">style</span>=</span></span><span class="hljs-expression">{{<span class="hljs-variable">flex</span>: 1, <span class="hljs-variable">backgroundColor</span>:<span class="hljs-string">"#aaccaa"</span>}}</span><span class="xml"><span class="hljs-tag">&gt;</span>
                      <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
                  <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">Text</span> <span class="hljs-attribute">style</span>=<span class="hljs-value">{[styles.text,</span> <span class="hljs-attribute">styles.header</span>, {<span class="hljs-attribute">color:</span> '#<span class="hljs-attribute">ffffff</span>', <span class="hljs-attribute">fontSize:</span> <span class="hljs-attribute">12</span>}]}&gt;</span>
                  {(function(){
                    var str = '';
                    var n = 100;
                    while(n--) {
                      str += '嵌套的网格' + '\n';
                    }
                    return str;
                  })()}
                <span class="hljs-tag">&lt;/<span class="hljs-title">Text</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-title">ScrollView</span>&gt;</span> 
        <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span></span>
</code></pre>
<p><img src="http://gtms03.alicdn.com/tps/i3/TB1MR7MHpXXXXbbXVXXrypWOFXX-371-229.png" alt=""></p>
<p>好在没被我玩儿坏，可以看到上图的嵌套关系也是足够的复杂的，（我还加了一个ScrollView，然后再嵌套整个结构）嵌套多层的布局是没有问题的。 </p>
<h2 id="-">图片布局</h2>
<p>首先我们得知道图片有一个stretchMode. 通过Image.resizeMode访问</p>
<h3 id="-mode">找出有哪些mode</h3>
<pre><code class="lang-javascript">  var <span class="hljs-keyword">keys</span> = Object.<span class="hljs-keyword">keys</span>(Image.resizeMode).<span class="hljs-keyword">join</span>(<span class="hljs-string">'  '</span>);
</code></pre>
<p>打印出来的是 contain, cover, stretch 这几种模式， （官方文档不知道为什么不直接给出）</p>
<h3 id="-mode">尝试使用这些mode</h3>
<pre><code class="lang-javascript"><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-title">Text</span> <span class="hljs-attribute">style</span>=<span class="hljs-value">{styles.welcome}</span>&gt;</span> 100px height <span class="hljs-tag">&lt;/<span class="hljs-title">Text</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">Image</span> <span class="hljs-attribute">style</span>=</span></span><span class="hljs-expression">{{<span class="hljs-variable">height</span>: 100}}</span><span class="xml"><span class="hljs-tag"> <span class="hljs-attribute">source</span>=</span></span><span class="hljs-expression">{{<span class="hljs-variable">uri</span>: '<span class="hljs-variable">http</span>:/<span class="hljs-end-block">/gtms</span>03<span class="hljs-variable">.alicdn.com</span><span class="hljs-end-block">/tps</span><span class="hljs-end-block">/i</span>3<span class="hljs-end-block">/TB</span>1<span class="hljs-variable">Kcs</span>5<span class="hljs-variable">GXXXXXbMXVXXutsrNFXX-</span>608<span class="hljs-variable">-</span>370<span class="hljs-variable">.png</span>'}}</span><span class="xml"><span class="hljs-tag"> /&gt;</span></span>
</code></pre>
<p><img src="http://gtms02.alicdn.com/tps/i2/TB12zZNHpXXXXcsXpXXItPuSXXX-377-139.png" alt=""> </p>
<p>100px 高度， 可以看到图片适应100高度和全屏宽度，背景居中适应未拉伸但是被截断也就是cover。  </p>
<pre><code class="lang-javascript"><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-title">Text</span> <span class="hljs-attribute">style</span>=<span class="hljs-value">{styles.welcome}</span>&gt;</span> 100px height with resizeMode contain <span class="hljs-tag">&lt;/<span class="hljs-title">Text</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">style</span>=<span class="hljs-value">{[{flex:</span> <span class="hljs-attribute">1</span>, <span class="hljs-attribute">backgroundColor:</span> '#<span class="hljs-attribute">fe0000</span>'}]}&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">Image</span> <span class="hljs-attribute">style</span>=</span></span><span class="hljs-expression">{{<span class="hljs-variable">flex</span>: 1, <span class="hljs-variable">height</span>: 100, <span class="hljs-variable">resizeMode</span>: <span class="hljs-variable">Image.resizeMode.contain</span>}}</span><span class="xml"><span class="hljs-tag"> <span class="hljs-attribute">source</span>=</span></span><span class="hljs-expression">{{<span class="hljs-variable">uri</span>: '<span class="hljs-variable">http</span>:/<span class="hljs-end-block">/gtms</span>03<span class="hljs-variable">.alicdn.com</span><span class="hljs-end-block">/tps</span><span class="hljs-end-block">/i</span>3<span class="hljs-end-block">/TB</span>1<span class="hljs-variable">Kcs</span>5<span class="hljs-variable">GXXXXXbMXVXXutsrNFXX-</span>608<span class="hljs-variable">-</span>370<span class="hljs-variable">.png</span>'}}</span><span class="xml"><span class="hljs-tag"> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span></span>
</code></pre>
<p><img src="http://gtms01.alicdn.com/tps/i1/TB1dxUMHpXXXXbHXFXXM0JSRFXX-376-141.png" alt=""><br>contain 模式容器完全容纳图片，图片自适应宽高</p>
<pre><code class="lang-javascript"><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-title">Text</span> <span class="hljs-attribute">style</span>=<span class="hljs-value">{styles.welcome}</span>&gt;</span> 100px height with resizeMode cover <span class="hljs-tag">&lt;/<span class="hljs-title">Text</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">style</span>=<span class="hljs-value">{[{flex:</span> <span class="hljs-attribute">1</span>, <span class="hljs-attribute">backgroundColor:</span> '#<span class="hljs-attribute">fe0000</span>'}]}&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">Image</span> <span class="hljs-attribute">style</span>=</span></span><span class="hljs-expression">{{<span class="hljs-variable">flex</span>: 1, <span class="hljs-variable">height</span>: 100, <span class="hljs-variable">resizeMode</span>: <span class="hljs-variable">Image.resizeMode.cover</span>}}</span><span class="xml"><span class="hljs-tag"> <span class="hljs-attribute">source</span>=</span></span><span class="hljs-expression">{{<span class="hljs-variable">uri</span>: '<span class="hljs-variable">http</span>:/<span class="hljs-end-block">/gtms</span>03<span class="hljs-variable">.alicdn.com</span><span class="hljs-end-block">/tps</span><span class="hljs-end-block">/i</span>3<span class="hljs-end-block">/TB</span>1<span class="hljs-variable">Kcs</span>5<span class="hljs-variable">GXXXXXbMXVXXutsrNFXX-</span>608<span class="hljs-variable">-</span>370<span class="hljs-variable">.png</span>'}}</span><span class="xml"><span class="hljs-tag"> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span></span>
</code></pre>
<p><img src="http://gtms03.alicdn.com/tps/i3/TB1XIwNHpXXXXXnXFXX_XBSRFXX-376-140.png" alt=""></p>
<p>cover模式同100px高度模式</p>
<pre><code class="lang-javascript"><span class="xml">
  <span class="hljs-tag">&lt;<span class="hljs-title">Text</span> <span class="hljs-attribute">style</span>=<span class="hljs-value">{styles.welcome}</span>&gt;</span> 100px height with resizeMode stretch <span class="hljs-tag">&lt;/<span class="hljs-title">Text</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">style</span>=<span class="hljs-value">{[{flex:</span> <span class="hljs-attribute">1</span>, <span class="hljs-attribute">backgroundColor:</span> '#<span class="hljs-attribute">fe0000</span>'}]}&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">Image</span> <span class="hljs-attribute">style</span>=</span></span><span class="hljs-expression">{{<span class="hljs-variable">flex</span>: 1, <span class="hljs-variable">height</span>: 100, <span class="hljs-variable">resizeMode</span>: <span class="hljs-variable">Image.resizeMode.stretch</span>}}</span><span class="xml"><span class="hljs-tag"> <span class="hljs-attribute">source</span>=</span></span><span class="hljs-expression">{{<span class="hljs-variable">uri</span>: '<span class="hljs-variable">http</span>:/<span class="hljs-end-block">/gtms</span>03<span class="hljs-variable">.alicdn.com</span><span class="hljs-end-block">/tps</span><span class="hljs-end-block">/i</span>3<span class="hljs-end-block">/TB</span>1<span class="hljs-variable">Kcs</span>5<span class="hljs-variable">GXXXXXbMXVXXutsrNFXX-</span>608<span class="hljs-variable">-</span>370<span class="hljs-variable">.png</span>'}}</span><span class="xml"><span class="hljs-tag"> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span></span>
</code></pre>
<p><img src="http://gtms04.alicdn.com/tps/i4/TB1f8eNHpXXXXb0aXXX0ijvSXXX-377-147.png" alt=""></p>
<p>stretch模式图片被拉伸适应屏幕</p>
<pre><code class="lang-javascript"><span class="xml">  <span class="hljs-tag">&lt;<span class="hljs-title">Text</span> <span class="hljs-attribute">style</span>=<span class="hljs-value">{styles.welcome}</span>&gt;</span> set height to image container <span class="hljs-tag">&lt;/<span class="hljs-title">Text</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">style</span>=<span class="hljs-value">{[{flex:</span> <span class="hljs-attribute">1</span>, <span class="hljs-attribute">backgroundColor:</span> '#<span class="hljs-attribute">fe0000</span>', <span class="hljs-attribute">height:</span> <span class="hljs-attribute">100</span>}]}&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">Image</span> <span class="hljs-attribute">style</span>=</span></span><span class="hljs-expression">{{<span class="hljs-variable">flex</span>: 1}}</span><span class="xml"><span class="hljs-tag"> <span class="hljs-attribute">source</span>=</span></span><span class="hljs-expression">{{<span class="hljs-variable">uri</span>: '<span class="hljs-variable">http</span>:/<span class="hljs-end-block">/gtms</span>03<span class="hljs-variable">.alicdn.com</span><span class="hljs-end-block">/tps</span><span class="hljs-end-block">/i</span>3<span class="hljs-end-block">/TB</span>1<span class="hljs-variable">Kcs</span>5<span class="hljs-variable">GXXXXXbMXVXXutsrNFXX-</span>608<span class="hljs-variable">-</span>370<span class="hljs-variable">.png</span>'}}</span><span class="xml"><span class="hljs-tag"> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span></span>
</code></pre>
<p><img src="http://gtms01.alicdn.com/tps/i1/TB1h0cQHpXXXXcrXXXX4OdTRFXX-376-146.png" alt=""> </p>
<p>随便试验了一下， 发现高度设置到父容器，图片flex的时候也会等同于cover模式 </p>
<h2 id="-">绝对定位和相对定位</h2>
<pre><code class="lang-javascript"> &lt;View style={{<span class="hljs-string">flex:</span> <span class="hljs-number">1</span>, <span class="hljs-string">height:</span> <span class="hljs-number">100</span>, <span class="hljs-string">backgroundColor:</span> <span class="hljs-string">'#333333'</span>}}&gt;
    &lt;View style={[styles.circle, {<span class="hljs-string">position:</span> <span class="hljs-string">'absolute'</span>, <span class="hljs-string">top:</span> <span class="hljs-number">50</span>, <span class="hljs-string">left:</span> <span class="hljs-number">180</span>}]}&gt;
    &lt;/View&gt;
  &lt;/View&gt;
  styles = {
<span class="hljs-label">    circle:</span> {
<span class="hljs-label">    backgroundColor:</span> <span class="hljs-string">'#fe0000'</span>,
<span class="hljs-label">    borderRadius:</span> <span class="hljs-number">10</span>,
<span class="hljs-label">    width:</span> <span class="hljs-number">20</span>,
<span class="hljs-label">    height:</span> <span class="hljs-number">20</span>
    }
  }
</code></pre>
<p><img src="http://gtms03.alicdn.com/tps/i3/TB1nosRHpXXXXX3XXXXgUklPVXX-376-98.png" alt=""> </p>
<p>和css的标准不同的是， 元素容器不用设置<code>position：&#39;absolute|relative&#39;</code> .  </p>
<pre><code class="lang-javascript"> &lt;View style={{<span class="hljs-string">flex:</span> <span class="hljs-number">1</span>, <span class="hljs-string">height:</span> <span class="hljs-number">100</span>, <span class="hljs-string">backgroundColor:</span> <span class="hljs-string">'#333333'</span>}}&gt;
    &lt;View style={[styles.circle, {<span class="hljs-string">position:</span> <span class="hljs-string">'relative'</span>, <span class="hljs-string">top:</span> <span class="hljs-number">50</span>, <span class="hljs-string">left:</span> <span class="hljs-number">50</span>, <span class="hljs-string">marginLeft:</span> <span class="hljs-number">50</span>}]}&gt;
    &lt;/View&gt;
  &lt;/View&gt;
</code></pre>
<p><img src="http://gtms04.alicdn.com/tps/i4/TB1qi7PHpXXXXXGXpXXsNdBPVXX-374-96.png" alt=""></p>
<p>相对定位的可以看到很容易的配合margin做到了。 （我还担心不能配合margin，所以测试了一下：-：） </p>
<h2 id="padding-margin">padding和margin</h2>
<p>我们知道在css中区分inline元素和block元素，既然react-native实现了一个超级小的css subset。那我们就来实验一下padding和margin在inline和非inline元素上的padding和margin的使用情况。  </p>
<p><strong>padding </strong> </p>
<pre><code class="lang-html"><span class="xml"> <span class="hljs-tag">&lt;<span class="hljs-title">Text</span> <span class="hljs-attribute">style</span>=<span class="hljs-value">{[styles.text,</span> <span class="hljs-attribute">styles.header</span>]}&gt;</span>
    在正常的View上设置padding 
  <span class="hljs-tag">&lt;/<span class="hljs-title">Text</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">style</span>=</span></span><span class="hljs-expression">{{<span class="hljs-variable">padding</span>: 30, <span class="hljs-variable">backgroundColor</span>: '#333333'}}</span><span class="xml"><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Text</span> <span class="hljs-attribute">style</span>=<span class="hljs-value">{[styles.text,</span> {<span class="hljs-attribute">color:</span> '#<span class="hljs-attribute">fefefe</span>'}]}&gt;</span> Text Element<span class="hljs-tag">&lt;/<span class="hljs-title">Text</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-title">Text</span> <span class="hljs-attribute">style</span>=<span class="hljs-value">{[styles.text,</span> <span class="hljs-attribute">styles.header</span>]}&gt;</span>
    在文本元素上设置padding
  <span class="hljs-tag">&lt;/<span class="hljs-title">Text</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">style</span>=</span></span><span class="hljs-expression">{{<span class="hljs-variable">padding</span>: 0, <span class="hljs-variable">backgroundColor</span>: '#333333'}}</span><span class="xml"><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Text</span> <span class="hljs-attribute">style</span>=<span class="hljs-value">{[styles.text,</span> {<span class="hljs-attribute">backgroundColor:</span> '#<span class="hljs-attribute">fe0000</span>', <span class="hljs-attribute">padding:</span> <span class="hljs-attribute">30</span>}]}&gt;</span>
      text 元素上设置paddinga
    <span class="hljs-tag">&lt;/<span class="hljs-title">Text</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span></span>
</code></pre>
<p><img src="http://gtms04.alicdn.com/tps/i4/TB1F6APHpXXXXXKXFXXcAMvQVXX-375-265.png" alt=""></p>
<p>在View上设置padding很顺利，没有任何问题， 但是如果在inline元素上设置padding， 发现会出现上面的错误， paddingTop和paddingBottom都被挤成marginBottom了。 按理说，不应该对Text做padding处理， 但是确实有这样的问题存在，所以可以将这个问题mark一下。 </p>
<p><strong>margin</strong></p>
<pre><code class="lang-html"><span class="xml"> <span class="hljs-tag">&lt;<span class="hljs-title">Text</span> <span class="hljs-attribute">style</span>=<span class="hljs-value">{[styles.text,</span> <span class="hljs-attribute">styles.header</span>]}&gt;</span>
    在正常的View上设置margin 
  <span class="hljs-tag">&lt;/<span class="hljs-title">Text</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">style</span>=</span></span><span class="hljs-expression">{{<span class="hljs-variable">backgroundColor</span>: '#333333'}}</span><span class="xml"><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">style</span>=</span></span><span class="hljs-expression">{{<span class="hljs-variable">backgroundColor</span>: '<span class="hljs-begin-block">#fefefe</span>', <span class="hljs-variable">width</span>: 30, <span class="hljs-variable">height</span>: 30, <span class="hljs-variable">margin</span>: 30}}</span><span class="xml"><span class="hljs-tag">/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-title">Text</span> <span class="hljs-attribute">style</span>=<span class="hljs-value">{[styles.text,</span> <span class="hljs-attribute">styles.header</span>]}&gt;</span>
    在文本元素上设置margin
  <span class="hljs-tag">&lt;/<span class="hljs-title">Text</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">style</span>=</span></span><span class="hljs-expression">{{<span class="hljs-variable">backgroundColor</span>: '#333333'}}</span><span class="xml"><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Text</span> <span class="hljs-attribute">style</span>=<span class="hljs-value">{[styles.text,</span> {<span class="hljs-attribute">backgroundColor:</span> '#<span class="hljs-attribute">fe0000</span>', <span class="hljs-attribute">margin:</span> <span class="hljs-attribute">30</span>}]}&gt;</span>
      text 元素上设置margin
    <span class="hljs-tag">&lt;/<span class="hljs-title">Text</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Text</span> <span class="hljs-attribute">style</span>=<span class="hljs-value">{[styles.text,</span> {<span class="hljs-attribute">backgroundColor:</span> '#<span class="hljs-attribute">fe0000</span>', <span class="hljs-attribute">margin:</span> <span class="hljs-attribute">30</span>}]}&gt;</span>
      text 元素上设置margin
    <span class="hljs-tag">&lt;/<span class="hljs-title">Text</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span></span>
</code></pre>
<p><img src="http://gtms03.alicdn.com/tps/i3/TB1yuYvHpXXXXXUaXXXlcAFQVXX-375-347.png" alt=""></p>
<p>我们知道，对于inline元素，设置margin-left和margin-right有效，top和bottom按理是不会生效的， 但是上图的结果可以看到，实际是生效了的。所以现在给我的感觉是Text元素更应该理解为一个不能设置padding的block。 </p>
<p>算了不要猜了， 我们看看官方文档怎么说Text，<a href="https://facebook.github.io/react-native/docs/text.html">https://facebook.github.io/react-native/docs/text.html</a> </p>
<pre><code class="lang-html">  &lt;<span class="hljs-keyword">Text</span>&gt;
    &lt;<span class="hljs-keyword">Text</span>&gt;<span class="hljs-keyword">First</span> part and &lt;/<span class="hljs-keyword">Text</span>&gt;
    &lt;<span class="hljs-keyword">Text</span>&gt;second part&lt;/<span class="hljs-keyword">Text</span>&gt;
  &lt;/<span class="hljs-keyword">Text</span>&gt;
  // <span class="hljs-keyword">Text</span> container: all the text flows as if it was one
  // |<span class="hljs-keyword">First</span> part |
  // |and second |
  // |part       |

  &lt;View&gt;
    &lt;<span class="hljs-keyword">Text</span>&gt;<span class="hljs-keyword">First</span> part and &lt;/<span class="hljs-keyword">Text</span>&gt;
    &lt;<span class="hljs-keyword">Text</span>&gt;second part&lt;/<span class="hljs-keyword">Text</span>&gt;
  &lt;/View&gt;
  // View container: each text is its own block
  // |<span class="hljs-keyword">First</span> part |
  // |and        |
  // |second part|
</code></pre>
<p>也就是如果Text元素在Text里边，可以考虑为inline， 如果单独在View里边，那就是Block。<br>下面会专门研究一下文本相关的布局  </p>
<h2 id="-">文本元素</h2>
<p>首先我们得考虑对于Text元素我们希望有哪些功能或者想验证哪些功能：</p>
<ol>
<li>文字是否能自动换行？</li>
<li>overflow ellipse？</li>
<li>是否能对部分文字设置样式 ，类似span等标签</li>
</ol>
<h3 id="-style-">先看看文字有哪些支持的style属性</h3>
<pre><code class="lang-javascript"> <span class="hljs-comment">/*==========TEXT================*/</span>
  Attributes.style = {
    color <span class="hljs-built_in">string</span>
    containerBackgroundColor <span class="hljs-built_in">string</span>
    fontFamily <span class="hljs-built_in">string</span>
    fontSize <span class="hljs-built_in">number</span>
    fontStyle <span class="hljs-keyword">enum</span>(<span class="hljs-string">'normal'</span>, <span class="hljs-string">'italic'</span>)
    fontWeight <span class="hljs-keyword">enum</span>(<span class="hljs-string">"normal"</span>, <span class="hljs-string">'bold'</span>, <span class="hljs-string">'100'</span>, <span class="hljs-string">'200'</span>, <span class="hljs-string">'300'</span>, <span class="hljs-string">'400'</span>, <span class="hljs-string">'500'</span>, <span class="hljs-string">'600'</span>, <span class="hljs-string">'700'</span>, <span class="hljs-string">'800'</span>, <span class="hljs-string">'900'</span>)
    lineHeight <span class="hljs-built_in">number</span>
    textAlign <span class="hljs-keyword">enum</span>(<span class="hljs-string">"auto"</span>, <span class="hljs-string">'left'</span>, <span class="hljs-string">'right'</span>, <span class="hljs-string">'center'</span>)
    writingDirection <span class="hljs-keyword">enum</span>(<span class="hljs-string">"auto"</span>, <span class="hljs-string">'ltr'</span>, <span class="hljs-string">'rtl'</span>)
  }
</code></pre>
<h3 id="-1-2-3">实验1， 2， 3</h3>
<pre><code class="lang-html"> &lt;Text style={[styles.<span class="hljs-type">text</span>, styles.header]}&gt;
      文本元素
  &lt;/Text&gt;

  &lt;View style={{backgroundColor: '<span class="hljs-comment">#333333', padding: 10}}&gt;</span>
    &lt;Text style={styles.baseText} numberOfLines={<span class="hljs-number">5</span>}&gt;
      &lt;Text style={styles.titleText} onPress={this.onPressTitle}&gt;
        文本元素{'\n'}
      &lt;/Text&gt;
      &lt;Text&gt;
        {'\n'}In this example, <span class="hljs-keyword">the</span> nested title <span class="hljs-keyword">and</span> body <span class="hljs-type">text</span> will inherit <span class="hljs-keyword">the</span> fontFamily <span class="hljs-keyword">from</span> styles.baseText, <span class="hljs-keyword">but</span> <span class="hljs-keyword">the</span> title provides <span class="hljs-keyword">its</span> own additional styles. The title <span class="hljs-keyword">and</span> body will stack <span class="hljs-function_start"><span class="hljs-keyword">on</span></span> top <span class="hljs-keyword">of</span> each other <span class="hljs-function_start"><span class="hljs-keyword">on</span></span> account <span class="hljs-keyword">of</span> <span class="hljs-keyword">the</span> literal newlines, numberOfLines <span class="hljs-keyword">is</span> Used <span class="hljs-keyword">to</span> truncate <span class="hljs-keyword">the</span> <span class="hljs-type">text</span> <span class="hljs-keyword">with</span> an elipsis <span class="hljs-keyword">after</span> computing <span class="hljs-keyword">the</span> <span class="hljs-type">text</span> layout, including line wrapping, such <span class="hljs-keyword">that</span> <span class="hljs-keyword">the</span> total <span class="hljs-type">number</span> <span class="hljs-keyword">of</span> lines <span class="hljs-keyword">does</span> <span class="hljs-keyword">not</span> exceed this <span class="hljs-type">number</span>.
      &lt;/Text&gt;
    &lt;/Text&gt;
  &lt;/View&gt;
  styles = {
    baseText: {
      fontFamily: 'Cochin',
      color: 'white'
    },
    titleText: {
      fontSize: <span class="hljs-number">20</span>,
      fontWeight: 'bold',
    }
  }
</code></pre>
<p><img src="http://gtms01.alicdn.com/tps/i1/TB19.EQHpXXXXceXpXXYxQoQVXX-375-225.png" alt=""></p>
<p>从结果来看1，2，3得到验证。 但是不知道各位有没有发现问题， 为什么底部空出了这么多空间， 没有设置高度啊。 我去除<code>numberOfLines={5}</code> 这行代码，效果如下：</p>
<p><img src="http://gtms04.alicdn.com/tps/i4/TB1.BoRHpXXXXbdXpXXGJknQVXX-375-220.png" alt=""><br>所以实际上， 那段空间是文本撑开的， 但是文本被<code>numberOfLines={5}</code> 截取了，但是剩余的空间还在。 我猜这应该是个bug。   </p>
<p>其实官方文档里边把<code>numberOfLines={5}</code>这句放到的是长文本的Text元素上的，也就是子Text上的。 实际结果是不生效。  这应该又是一个bug。 </p>
<p>Text元素的子Text元素的具体实现是怎样的， 感觉这货会有很多bug， 看官文 </p>
<pre><code class="lang-html"><span class="xml"> <span class="hljs-tag">&lt;<span class="hljs-title">Text</span> <span class="hljs-attribute">style</span>=</span></span><span class="hljs-expression">{{<span class="hljs-variable">fontWeight</span>: '<span class="hljs-variable">bold</span>'}}</span><span class="xml"><span class="hljs-tag">&gt;</span>
  I am bold
  <span class="hljs-tag">&lt;<span class="hljs-title">Text</span> <span class="hljs-attribute">style</span>=</span></span><span class="hljs-expression">{{<span class="hljs-variable">color</span>: '<span class="hljs-variable">red</span>'}}</span><span class="xml"><span class="hljs-tag">&gt;</span>
    and red
  <span class="hljs-tag">&lt;/<span class="hljs-title">Text</span>&gt;</span>
 <span class="hljs-tag">&lt;/<span class="hljs-title">Text</span>&gt;</span></span>
</code></pre>
<blockquote>
<p>Behind the scenes, this is going to be converted to a flat<br>NSAttributedString that contains the following information </p>
</blockquote>
<pre><code class="lang-javascript"> <span class="hljs-string">"I am bold and red"</span>
  <span class="hljs-number">0</span>-<span class="hljs-number">9</span>: bold
  <span class="hljs-number">9</span>-<span class="hljs-number">17</span>: bold, <span class="hljs-built_in">red</span>
</code></pre>
<p>好吧， 那对于<code>numberOfLines={5}</code>  放在子Text元素上的那种bug倒是可以解释了。 </p>
<h3 id="text-">Text的样式继承</h3>
<p>实际上React-native里边是没有样式继承这种说法的， 但是对于Text元素里边的Text元素，上面的例子可以看出存在继承。 那既然有继承，问题就来了！</p>
<p>到底是继承的最外层的Text的值呢，还是继承父亲Text的值呢？</p>
<pre><code class="lang-html"><span class="xml"> <span class="hljs-tag">&lt;<span class="hljs-title">Text</span> <span class="hljs-attribute">style</span>=<span class="hljs-value">{[styles.text,</span> <span class="hljs-attribute">styles.header</span>]}&gt;</span>
      文本样式继承
  <span class="hljs-tag">&lt;/<span class="hljs-title">Text</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-title">View</span> <span class="hljs-attribute">style</span>=</span></span><span class="hljs-expression">{{<span class="hljs-variable">backgroundColor</span>: '#333333', <span class="hljs-variable">padding</span>: 10}}</span><span class="xml"><span class="hljs-tag">&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">Text</span> <span class="hljs-attribute">style</span>=</span></span><span class="hljs-expression">{{<span class="hljs-variable">color</span>: '<span class="hljs-variable">white</span>'}}</span><span class="xml"><span class="hljs-tag">&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">Text</span> <span class="hljs-attribute">style</span>=</span></span><span class="hljs-expression">{{<span class="hljs-variable">color</span>: '<span class="hljs-variable">red</span>'}}</span><span class="xml"><span class="hljs-tag"> <span class="hljs-attribute">onPress</span>=<span class="hljs-value">{this.onPressTitle}</span>&gt;</span>
         文本元素{'\n'}
        <span class="hljs-tag">&lt;<span class="hljs-title">Text</span>&gt;</span>我是white还是red呢？{'\n'} <span class="hljs-tag">&lt;/<span class="hljs-title">Text</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">Text</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">Text</span>&gt;</span>我应该是white的<span class="hljs-tag">&lt;/<span class="hljs-title">Text</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">Text</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">View</span>&gt;</span></span>
</code></pre>
<p><img src="http://gtms04.alicdn.com/tps/i4/TB1z2ERHpXXXXcrXpXXXsoYPFXX-373-120.png" alt=""></p>
<p>结果可见是直接继承父亲Text的。  </p>
<h2 id="-">总结</h2>
<ol>
<li>react 宽度基于<code>pt</code>为单位， 可以通过<code>Dimensions</code> 来获取宽高，<code>PixelRatio</code> 获取密度。 </li>
<li>基于flex的布局 <ol>
<li>view默认宽度为100%</li>
<li>水平居中用<code>alignItems</code>, 垂直居中用<code>justifyContent</code> </li>
<li>基于flex能够实现现有的网格系统需求，且网格能够各种嵌套无bug</li>
</ol>
</li>
<li>图片布局<ol>
<li>通过<code>Image.resizeMode</code>来适配图片布局，包括<code>contain</code>, <code>cover</code>, <code>stretch</code> </li>
<li>默认不设置模式等于cover模式</li>
<li>contain模式自适应宽高，给出高度值即可</li>
<li>cover铺满容器，但是会做截取 </li>
<li>stretch铺满容器，拉伸 </li>
</ol>
</li>
<li>定位<ol>
<li>定位相对于父元素，父元素不用设置position也行</li>
<li>padding 设置在Text元素上的时候会存在bug。所有padding变成了marginBottom</li>
</ol>
</li>
<li>文本元素<ol>
<li>文字必须放在Text元素里边</li>
<li>Text元素可以相互嵌套，且存在样式继承关系</li>
<li><code>numberOfLines</code> 需要放在最外层的Text元素上，且虽然截取了文字但是还是会占用空间</li>
</ol>
</li>
</ol>

                </section>
                <h4 class="ui horizontal header divider">
                    &lt;6174/&gt;
                </h4>
                <div id="disqus_thread"></div>
            </article>

            <script type="text/javascript">
                /* * * CONFIGURATION VARIABLES * * */
                var disqus_shortname = '6174';
                
                /* * * DON'T EDIT BELOW THIS LINE * * */
                (function() {
                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
            </script>
            <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
            <script>
            var _hmt = _hmt || [];
            (function() {
              var hm = document.createElement("script");
              hm.src = "//hm.baidu.com/hm.js?7b14384bfb6605e915ae92e70b916417";
              var s = document.getElementsByTagName("script")[0]; 
              s.parentNode.insertBefore(hm, s);
            })();
            </script>

        </div>

   </div>  
</body>
</html>