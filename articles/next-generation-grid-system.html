<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
        <link rel="stylesheet" type="text/css" href="../stylesheets/reset.css"/>
        <link rel="stylesheet" type="text/css" href="../stylesheets/main.css"/>
        <link rel="stylesheet" type="text/css" href="../stylesheets/article.css"/>
        <title>6174's blog</title>
    </head>
<body>
   <div class="page-article">
        <nav class="site-nav" >
            <div class="ui breadcrumb" >
                <a href="http://6174.github.io/blog/">archive</a>
            </div>
        </nav>
        <div class="fixcontainer">
            <article class="article">
                <header class="post-header">
                    <h1 class="post-title"> 下一代网格系统</h1>
                    <section class="post-meta">
                        <a class="post-author" target="_blank" href="http://www.weibo.com/2254313183/profile"> &lt;6174/&gt;</a>
                        创建于
                        <time class="post-date"> 2014-11-30</time>
                    </section>
                    <hr/>
                </header>
                <section class="post-content">
                    <h2 id="-">什么是网格系统</h2>
<p>相信网格系统我就不用多介绍， 网格系统极大的简化我们日常的ui开发。 通常来说，我们所熟悉的前端UI框架都会包括一个基本的网格系统，如<code>bootstrap</code>, <code>foundation</code>, <code>semantic-ui</code>. 当使用这些框架的时候，会发现大量的用到网格。 </p>
<h2 id="-">为什么需要新的网格系统</h2>
<p>网格系统在不断的演进， 重最初的<code>960 grid system</code> 到这两年的<code>responsive grid system</code>。但是随着现在碎片化的终端以及ui的复杂化，原先使用<code>float</code>的网格系统在布局上会遇到越来越多的挑战。当我们需要螺丝刀的时候却还在用锤子在工作， 当然不会有什么效率可言。现在的UI布局总结而言</p>
<ol>
<li><strong>越来越复杂</strong></li>
<li><strong>动态化和自适应</strong></li>
<li><strong>响应式</strong></li>
</ol>
<p>这个时候浏览器为了解决这类问题，提供了很多方法：<code>flexbox</code>, <code>media query</code>, <code>em,rem,vw,vh</code>. 这里我们将讨论的时如何使用<code>flexbox</code>来实现新一代的网格系统。这里不会介绍flexbox的用法，而是更多地介绍基于flexbox实现的网格</p>
<p><strong>下面我会通过案例介绍网格系统用法， 最后提供源码</strong></p>
<h2 id="-">等分的网格</h2>
<p><img src="http://gtms04.alicdn.com/tps/i4/TB1U5KDGVXXXXXvXXXXibE53FXX-708-64.png" alt="图片描述"></p>
<p><strong>代码:</strong></p>
<pre><code class="lang-html">&lt;<span class="hljs-keyword">div</span> <span class="hljs-type">class</span>=<span class="hljs-string">"mui-flex"</span>&gt;
  &lt;<span class="hljs-keyword">div</span> <span class="hljs-type">class</span>=<span class="hljs-string">"cell"</span>&gt;<span class="hljs-number">1</span>&lt;/<span class="hljs-keyword">div</span>&gt;
  &lt;<span class="hljs-keyword">div</span> <span class="hljs-type">class</span>=<span class="hljs-string">"cell"</span>&gt;<span class="hljs-number">2</span>&lt;/<span class="hljs-keyword">div</span>&gt;
  &lt;<span class="hljs-keyword">div</span> <span class="hljs-type">class</span>=<span class="hljs-string">"cell"</span>&gt;<span class="hljs-number">3</span>&lt;/<span class="hljs-keyword">div</span>&gt;
  &lt;<span class="hljs-keyword">div</span> <span class="hljs-type">class</span>=<span class="hljs-string">"cell"</span>&gt;<span class="hljs-number">4</span>&lt;/<span class="hljs-keyword">div</span>&gt;
&lt;/<span class="hljs-keyword">div</span>&gt;
</code></pre>
<p><strong>解释:</strong></p>
<p>原先的<code>grid&gt;cell</code>是基于百分比和float的， 百分比不可能达到绝对的准确。 但是flexbox则不同，是浏览器分配的等比例宽度， 这里每一个cell的flex为1, 所以会等比例分配. </p>
<h2 id="-">纵向的等比例分配</h2>
<p><img src="http://gtms04.alicdn.com/tps/i4/TB1kVuBGVXXXXcJXXXXwpp1NFXX-715-205.png" alt="图片描述"></p>
<p><strong>代码:</strong></p>
<pre><code class="lang-html">&lt;<span class="hljs-keyword">div</span> <span class="hljs-type">class</span>=<span class="hljs-string">"mui-flex vertical"</span> style=<span class="hljs-string">"height: 200px;"</span>&gt;
    &lt;<span class="hljs-keyword">div</span> <span class="hljs-type">class</span>=<span class="hljs-string">"cell"</span>&gt;<span class="hljs-number">1</span>&lt;/<span class="hljs-keyword">div</span>&gt;
    &lt;<span class="hljs-keyword">div</span> <span class="hljs-type">class</span>=<span class="hljs-string">"cell"</span>&gt;<span class="hljs-number">2</span>&lt;/<span class="hljs-keyword">div</span>&gt;
    &lt;<span class="hljs-keyword">div</span> <span class="hljs-type">class</span>=<span class="hljs-string">"cell"</span>&gt;<span class="hljs-number">3</span>&lt;/<span class="hljs-keyword">div</span>&gt;
    &lt;<span class="hljs-keyword">div</span> <span class="hljs-type">class</span>=<span class="hljs-string">"cell"</span>&gt;<span class="hljs-number">4</span>&lt;/<span class="hljs-keyword">div</span>&gt;
&lt;/<span class="hljs-keyword">div</span>&gt;
</code></pre>
<p><strong>解释：</strong><br>原先的网格系统，如果为了实现纵向的话， 必须要对高度也设置12格的百分比，这样带来的时源文件变很大。 但是对于flexbox来说，只需要设置： <code>flex-direction: column</code>就行。 对于横线能做的事情，纵向都能做，我只能说，这才是我们需要的网格。 </p>
<h2 id="-">未知的固定尺寸 + 动态的宽度</h2>
<p><img src="http://gtms01.alicdn.com/tps/i1/TB1UkuxGVXXXXbBXpXXit4KKFXX-710-125.png" alt="图片描述"> </p>
<p>相信上图的这种布局需求是很常见的，但是如果200px这个是不确定的呢？在很多场景下， 我们需要一个文字 + 动态宽度的设计， 这个时候文字的长度不确定，如果要实现这样的需要，可能之有上js了。 </p>
<p><strong>代码</strong></p>
<pre><code class="lang-html">&lt;<span class="hljs-keyword">div</span> <span class="hljs-type">class</span>=<span class="hljs-string">"mui-flex"</span>&gt;
  &lt;<span class="hljs-keyword">div</span> <span class="hljs-type">class</span>=<span class="hljs-string">"cell fixed"</span> style=<span class="hljs-string">"width: 200px;"</span>&gt;<span class="hljs-number">200</span>px&lt;/<span class="hljs-keyword">div</span>&gt;
  &lt;<span class="hljs-keyword">div</span> <span class="hljs-type">class</span>=<span class="hljs-string">"cell"</span>&gt;flex&lt;/<span class="hljs-keyword">div</span>&gt;
  &lt;<span class="hljs-keyword">div</span> <span class="hljs-type">class</span>=<span class="hljs-string">"cell"</span>&gt;flex&lt;/<span class="hljs-keyword">div</span>&gt;
  &lt;<span class="hljs-keyword">div</span> <span class="hljs-type">class</span>=<span class="hljs-string">"cell"</span>&gt;flex&lt;/<span class="hljs-keyword">div</span>&gt;
&lt;/<span class="hljs-keyword">div</span>&gt;

&lt;<span class="hljs-keyword">div</span> <span class="hljs-type">class</span>=<span class="hljs-string">"mui-flex"</span>&gt;
  &lt;<span class="hljs-keyword">div</span> <span class="hljs-type">class</span>=<span class="hljs-string">"cell fixed"</span> style=<span class="hljs-string">"width: 100px;"</span>&gt;<span class="hljs-number">100</span>px&lt;/<span class="hljs-keyword">div</span>&gt;
  &lt;<span class="hljs-keyword">div</span> <span class="hljs-type">class</span>=<span class="hljs-string">"cell"</span>&gt;flex&lt;/<span class="hljs-keyword">div</span>&gt;
  &lt;<span class="hljs-keyword">div</span> <span class="hljs-type">class</span>=<span class="hljs-string">"cell fixed"</span> style=<span class="hljs-string">"width: 100px"</span>&gt;<span class="hljs-number">100</span>px&lt;/<span class="hljs-keyword">div</span>&gt;
&lt;/<span class="hljs-keyword">div</span>&gt;
</code></pre>
<p><strong>解释</strong><br>这里的fixed表示<code>flex: none</code>, 这样flexbox就会动态的计算flex的cell的宽度。 </p>
<p>这里我们还可以看纵向的这样的需求：</p>
<p><img src="http://gtms02.alicdn.com/tps/i2/TB1wYGkGVXXXXXfaXXXx1OQJpXX-705-305.png" alt="图片描述"> </p>
<p><strong>代码</strong></p>
<pre><code class="lang-html">&lt;<span class="hljs-keyword">div</span> <span class="hljs-type">class</span>=<span class="hljs-string">"mui-flex vertical"</span> style=<span class="hljs-string">"height: 300px;"</span>&gt;
    &lt;<span class="hljs-keyword">div</span> <span class="hljs-type">class</span>=<span class="hljs-string">"cell fixed"</span> style=<span class="hljs-string">"height: 50px"</span>&gt;<span class="hljs-number">50</span>px header&lt;/<span class="hljs-keyword">div</span>&gt;
    &lt;<span class="hljs-keyword">div</span> <span class="hljs-type">class</span>=<span class="hljs-string">"cell"</span>&gt;flex content&lt;/<span class="hljs-keyword">div</span>&gt;
    &lt;<span class="hljs-keyword">div</span> <span class="hljs-type">class</span>=<span class="hljs-string">"cell fixed"</span> style=<span class="hljs-string">"height: 50px"</span>&gt;<span class="hljs-number">50</span>px footer&lt;/<span class="hljs-keyword">div</span>&gt;
&lt;/<span class="hljs-keyword">div</span>&gt;
</code></pre>
<h2 id="-div">垂直水平居中的div</h2>
<p><img src="http://gtms03.alicdn.com/tps/i3/TB1WhuBGVXXXXbUXXXXm4VtUVXX-733-218.png" alt="图片描述">  </p>
<p>这种需求绝对的时主流， 以前的方式通过<code>table-cell</code>, 通过<code>top: 50%...</code> 通过<code>line-height</code>， 都是很别扭的hack方法。 但是现在可以通过flexbox完美支持</p>
<p><strong>代码</strong></p>
<pre><code class="lang-html">&lt;<span class="hljs-keyword">div</span> <span class="hljs-type">class</span>=<span class="hljs-string">"mui-flex align-center justify-center"</span> style=<span class="hljs-string">"height: 200px; border: solid 1px gray;"</span>&gt;
    &lt;<span class="hljs-keyword">div</span> <span class="hljs-type">class</span>=<span class="hljs-string">"cell fixed"</span> style=<span class="hljs-string">"width: 50px;"</span>&gt;<span class="hljs-number">50</span>px&lt;/<span class="hljs-keyword">div</span>&gt;
    &lt;<span class="hljs-keyword">div</span> <span class="hljs-type">class</span>=<span class="hljs-string">"cell fixed"</span> style=<span class="hljs-string">"width: 50px;"</span>&gt;<span class="hljs-number">50</span>px&lt;/<span class="hljs-keyword">div</span>&gt;
    &lt;<span class="hljs-keyword">div</span> <span class="hljs-type">class</span>=<span class="hljs-string">"cell fixed"</span> style=<span class="hljs-string">"width: 50px;"</span>&gt;<span class="hljs-number">50</span>px&lt;/<span class="hljs-keyword">div</span>&gt;
&lt;/<span class="hljs-keyword">div</span>&gt;
</code></pre>
<p><strong>解释</strong><br><code>align-center</code> 会让所有的cell垂直居中， <code>justify-center</code>会让所有的cell水平居中。</p>
<h2 id="col-">col-* 的也可以完美保留</h2>
<p>以前我们会使用<code>col-1, col-4, col-6</code>等这样的用法， 表示一个cell占用12网格的多少个网格。<br>现在的用法也类似：</p>
<pre><code class="lang-html">&lt;<span class="hljs-keyword">div</span> <span class="hljs-type">class</span>=<span class="hljs-string">"mui-flex"</span>&gt;
    &lt;<span class="hljs-keyword">div</span> <span class="hljs-type">class</span>=<span class="hljs-string">"cell cell-6"</span>&gt;<span class="hljs-number">50</span>%&lt;/<span class="hljs-keyword">div</span>&gt;
    &lt;<span class="hljs-keyword">div</span> <span class="hljs-type">class</span>=<span class="hljs-string">"cell"</span>&gt;flex&lt;/<span class="hljs-keyword">div</span>&gt;
    &lt;<span class="hljs-keyword">div</span> <span class="hljs-type">class</span>=<span class="hljs-string">"cell"</span>&gt;flex&lt;/<span class="hljs-keyword">div</span>&gt;
&lt;/<span class="hljs-keyword">div</span>&gt;
</code></pre>
<p>输出结果为：</p>
<p><img src="http://gtms03.alicdn.com/tps/i3/TB1bMymGVXXXXbLXVXXBPQ53FXX-708-66.png" alt="图片描述"> </p>
<h2 id="-div">动态的等高的div</h2>
<p><img src="http://gtms01.alicdn.com/tps/i1/TB1205uGVXXXXa0XFXXU6s0SVXX-730-408.png" alt="图片描述"><br> 按照旧的方式来实现的话， 我相信不上js是没有办法解决的。 看看现在的方式能有多简单。 </p>
<pre><code class="lang-html">&lt;<span class="hljs-keyword">div</span> <span class="hljs-type">class</span>=<span class="hljs-string">"mui-flex align-stretch"</span> style=<span class="hljs-string">"border: solid 1px gray;"</span>&gt;
    &lt;<span class="hljs-keyword">div</span> <span class="hljs-type">class</span>=<span class="hljs-string">"cell"</span>&gt;flex&lt;/<span class="hljs-keyword">div</span>&gt;
    &lt;<span class="hljs-keyword">div</span> <span class="hljs-type">class</span>=<span class="hljs-string">"cell"</span>&gt;flex&lt;/<span class="hljs-keyword">div</span>&gt;
    &lt;<span class="hljs-keyword">div</span> <span class="hljs-type">class</span>=<span class="hljs-string">"cell"</span>&gt;&lt;pre&gt;
        x
        x
        x
        x
        x
        x
    &lt;/pre&gt;&lt;/<span class="hljs-keyword">div</span>&gt;
&lt;/<span class="hljs-keyword">div</span>&gt;
</code></pre>
<p> 只需要加上<code>align-stretch</code> 类就可以实现等高的需求， 这里值得注意的时， 如果自己在cell上设置了高度， 会覆盖flexbox分配的stretch高度。 </p>
<h2 id="flexbox-align">flexbox 独有的align</h2>
<p><strong>align items top</strong><br><img src="http://gtms02.alicdn.com/tps/i2/TB1wyKvGVXXXXXlXFXXsphsUVXX-733-209.png" alt="图片描述"><br><strong>align items bottom</strong><br><img src="http://gtms03.alicdn.com/tps/i3/TB1qVirGVXXXXXiXVXXSdGdTFXX-728-215.png" alt="图片描述"><br><strong>align items center</strong><br><img src="http://gtms04.alicdn.com/tps/i4/TB1NmuoGVXXXXbvXVXXiRO0SpXX-726-215.png" alt="图片描述"></p>
<pre><code class="lang-html">&lt;<span class="hljs-keyword">div</span> <span class="hljs-type">class</span>=<span class="hljs-string">"mui-flex  align-start"</span> style=<span class="hljs-string">"height: 200px; border: solid 1px gray;"</span>&gt;
    &lt;<span class="hljs-keyword">div</span> <span class="hljs-type">class</span>=<span class="hljs-string">"cell cell-6"</span>&gt;<span class="hljs-number">50</span>%&lt;/<span class="hljs-keyword">div</span>&gt;
    &lt;<span class="hljs-keyword">div</span> <span class="hljs-type">class</span>=<span class="hljs-string">"cell"</span>&gt;flex&lt;/<span class="hljs-keyword">div</span>&gt;
    &lt;<span class="hljs-keyword">div</span> <span class="hljs-type">class</span>=<span class="hljs-string">"cell"</span>&gt;flex&lt;/<span class="hljs-keyword">div</span>&gt;
&lt;/<span class="hljs-keyword">div</span>&gt;

&lt;<span class="hljs-keyword">div</span> <span class="hljs-type">class</span>=<span class="hljs-string">"mui-flex  align-end"</span> style=<span class="hljs-string">"height: 200px; border: solid 1px gray;"</span>&gt;
    &lt;<span class="hljs-keyword">div</span> <span class="hljs-type">class</span>=<span class="hljs-string">"cell cell-6"</span>&gt;<span class="hljs-number">50</span>%&lt;/<span class="hljs-keyword">div</span>&gt;
    &lt;<span class="hljs-keyword">div</span> <span class="hljs-type">class</span>=<span class="hljs-string">"cell"</span>&gt;flex&lt;/<span class="hljs-keyword">div</span>&gt;
    &lt;<span class="hljs-keyword">div</span> <span class="hljs-type">class</span>=<span class="hljs-string">"cell"</span>&gt;flex&lt;/<span class="hljs-keyword">div</span>&gt;
&lt;/<span class="hljs-keyword">div</span>&gt;

&lt;<span class="hljs-keyword">div</span> <span class="hljs-type">class</span>=<span class="hljs-string">"mui-flex align-center"</span> style=<span class="hljs-string">"height: 200px; border: solid 1px gray;"</span>&gt;
    &lt;<span class="hljs-keyword">div</span> <span class="hljs-type">class</span>=<span class="hljs-string">"cell cell-6"</span>&gt;<span class="hljs-number">50</span>%&lt;/<span class="hljs-keyword">div</span>&gt;
    &lt;<span class="hljs-keyword">div</span> <span class="hljs-type">class</span>=<span class="hljs-string">"cell"</span>&gt;flex&lt;/<span class="hljs-keyword">div</span>&gt;
    &lt;<span class="hljs-keyword">div</span> <span class="hljs-type">class</span>=<span class="hljs-string">"cell"</span>&gt;flex&lt;/<span class="hljs-keyword">div</span>&gt;
&lt;/<span class="hljs-keyword">div</span>&gt;
</code></pre>
<p><strong>align-self</strong><br>cell可以自己控制自身的align<br><img src="http://gtms01.alicdn.com/tps/i1/TB1Kt1vGVXXXXX0XFXXm4VtUVXX-733-218.png" alt="图片描述"></p>
<pre><code class="lang-html">&lt;<span class="hljs-keyword">div</span> <span class="hljs-type">class</span>=<span class="hljs-string">"mui-flex align-center"</span> style=<span class="hljs-string">"height: 200px; border: solid 1px gray;"</span>&gt;
    &lt;<span class="hljs-keyword">div</span> <span class="hljs-type">class</span>=<span class="hljs-string">"cell align-start"</span>&gt;align top&lt;/<span class="hljs-keyword">div</span>&gt;
    &lt;<span class="hljs-keyword">div</span> <span class="hljs-type">class</span>=<span class="hljs-string">"cell"</span>&gt;flex&lt;/<span class="hljs-keyword">div</span>&gt;
    &lt;<span class="hljs-keyword">div</span> <span class="hljs-type">class</span>=<span class="hljs-string">"cell"</span>&gt;flex&lt;/<span class="hljs-keyword">div</span>&gt;
&lt;/<span class="hljs-keyword">div</span>&gt;
</code></pre>
<p>其他的cell上， 也可以使用<code>align-end</code>, <code>align-center</code>, <code>align-stretch</code>。 </p>
<h2 id="-">不等比例的适应</h2>
<p><img src="http://gtms04.alicdn.com/tps/i4/TB16nWvGVXXXXXOXVXXJHdbFXXX-772-168.png" alt=""> </p>
<p>解决方案只需要这样：</p>
<pre><code class="lang-html">&lt;<span class="hljs-keyword">div</span> <span class="hljs-type">class</span>=<span class="hljs-string">"mui-flex display"</span>&gt;
  &lt;<span class="hljs-keyword">div</span> <span class="hljs-type">class</span>=<span class="hljs-string">"cell"</span> style=<span class="hljs-string">"flex: 150;"</span>&gt;flex150&lt;/<span class="hljs-keyword">div</span>&gt;
  &lt;<span class="hljs-keyword">div</span> <span class="hljs-type">class</span>=<span class="hljs-string">"cell"</span> style=<span class="hljs-string">"flex: 105;"</span>&gt;flex105&lt;/<span class="hljs-keyword">div</span>&gt;
  &lt;<span class="hljs-keyword">div</span> <span class="hljs-type">class</span>=<span class="hljs-string">"cell"</span> style=<span class="hljs-string">"flex: 120;"</span>&gt;flex120&lt;/<span class="hljs-keyword">div</span>&gt;
&lt;/<span class="hljs-keyword">div</span>&gt;
</code></pre>
<p>效果：</p>
<p><img src="http://gtms03.alicdn.com/tps/i3/TB1ffmEGVXXXXb2XXXX7HJW5FXX-741-67.png" alt=""></p>
<h2 id="-cell-padding-">不能在cell上面加上padding， 否则宽度难控制</h2>
<p><img src="http://gtms03.alicdn.com/tps/i3/TB1_CioGVXXXXaoXVXXn4JkWXXX-735-528.png" alt=""></p>
<h2 id="-">源码</h2>
<p><a href="http://gitlab.alibaba-inc.com/mui/flex/tree/master">http://gitlab.alibaba-inc.com/mui/flex/tree/master</a></p>

                </section>
                <h4 class="ui horizontal header divider">
                    &lt;6174/&gt;
                </h4>
                <div id="disqus_thread"></div>
            </article>

            <script type="text/javascript">
                /* * * CONFIGURATION VARIABLES * * */
                var disqus_shortname = '6174';
                
                /* * * DON'T EDIT BELOW THIS LINE * * */
                (function() {
                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
            </script>
            <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
            <script>
            var _hmt = _hmt || [];
            (function() {
              var hm = document.createElement("script");
              hm.src = "//hm.baidu.com/hm.js?7b14384bfb6605e915ae92e70b916417";
              var s = document.getElementsByTagName("script")[0]; 
              s.parentNode.insertBefore(hm, s);
            })();
            </script>

        </div>

   </div>  
</body>
</html>